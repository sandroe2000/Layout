<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="/img/favicons/favicon.ico" />
	<link rel="stylesheet" href="/assets/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css" />
	<link rel="stylesheet" href="/assets/monaco-editor/min/vs/editor/editor.main.css" data-name="vs/editor/editor.main" />
    <title>Layout Like Atlassian</title>
    <style>
        body,
        html {
            background-color: red;
        }
        #editor{
            position: absolute;
            top: 0px;
            left: 0px;
            bottom: 0px;
            right: 0px;
            border: 1px solid #dfe1e6;
        }
    </style>
  </head>
  <body>

    <div id="editor"></div>

	<script src="/assets/jquery/dist/jquery.min.js"></script>
    <script src="/assets/popper.js/dist/umd/popper.min.js"></script>
	<script src="/assets/bootstrap/dist/js/bootstrap.js"></script>
	<script>var require = { paths: { 'vs': '/assets/monaco-editor/min/vs' } };</script>
	<script src="/assets/monaco-editor/min/vs/loader.js"></script>
	<script src="/assets/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
    <script src="/assets/monaco-editor/min/vs/editor/editor.main.js"></script>
    <script>
            var sourceContentInEdition = "";
            var editor = null;
        
            $(document).ready(function() {
                require(['vs/editor/editor.main'], function () {
        
                    loadSample({
                        modeId: getLanguageId(sourceContentInEdition),
                        sampleURL: sourceContentInEdition
                    });
        
                });
        
                window.onresize = resizeEditor();
        
                function resizeEditor(){
                    if (editor) {
                        editor.layout();
                    }
                }
            });
        
            function getLanguageId(editFile){
        
                let ext = editFile.split('.').pop();
                if(ext=='js'){  
                    ext = 'javascript';
                }
                return ext;
            }
        
            var preloaded = {};
            (function() {
                var elements = Array.prototype.slice.call(document.querySelectorAll('pre[data-preload]'), 0);
        
                elements.forEach(function(el) {
                    var path = el.getAttribute('data-preload');
                    preloaded[path] = el.innerText || el.textContent;
                    el.parentNode.removeChild(el);
                });
            })();
        
            function xhr(url, cb) {
                if (preloaded[url]) {
                    return cb(null, preloaded[url]);
                }
        
                fetch(sourceContentInEdition)
                .then(function(response) {
                    return response.text();
                })
                .then(function(data) {
                    cb(null, data);
                });
            }
        
            function loadSample(mode) {
        
                $('.loading.editor').show();
                xhr(mode.sampleURL, function(err, data) {
                    if (err) {
                        if (editor) {
                            if (editor.getModel()) {
                                editor.getModel().dispose();
                            }
                            editor.dispose();
                            editor = null;
                        }
                        $('.loading.editor').fadeOut({ duration: 200 });
                        $('#editor').empty();
                        $('#editor').append('<p class="alert alert-error">Failed to load ' + mode.modeId + ' sample</p>');
                        return;
                    }
        
                    if (!editor) {
                        $('#editor').empty();
                        editor = monaco.editor.create(document.getElementById('editor'), {
                            model: null,
                        });
                    }
        
                    var oldModel = editor.getModel();
                    var newModel = monaco.editor.createModel(data, mode.modeId);
                    editor.setModel(newModel);
                    if (oldModel) {
                        oldModel.dispose();
                    }
                    monaco.editor.setTheme('vs-dark');
                    $('.loading.editor').fadeOut({ duration: 300 });
                })
            }
        
            function loadDiffSample() {
        
                var onError = function() {
                    $('.loading.diff-editor').fadeOut({ duration: 200 });
                    $('#diff-editor').append('<p class="alert alert-error">Failed to load diff editor sample</p>');
                };
        
                $('.loading.diff-editor').show();
        
                var lhsData = null, rhsData = null, jsMode = null;
        
                xhr('index/samples/diff.lhs.txt', function(err, data) {
                    if (err) {
                        return onError();
                    }
                    lhsData = data;
                    onProgress();
                })
                xhr('index/samples/diff.rhs.txt', function(err, data) {
                    if (err) {
                        return onError();
                    }
                    rhsData = data;
                    onProgress();
                })
        
                function onProgress() {
                    if (lhsData && rhsData) {
                        diffEditor = monaco.editor.createDiffEditor(document.getElementById('diff-editor'), {
                            enableSplitViewResizing: false
                        });
        
                        var lhsModel = monaco.editor.createModel(lhsData, 'text/javascript');
                        var rhsModel = monaco.editor.createModel(rhsData, 'text/javascript');
        
                        diffEditor.setModel({
                            original: lhsModel,
                            modified: rhsModel
                        });
        
                        $('.loading.diff-editor').fadeOut({ duration: 300 });
                    }
                }
            }
        
            function changeTheme(theme) {
                var newTheme = (theme === 1 ? 'vs-dark' : ( theme === 0 ? 'vs' : 'hc-black' ));
                monaco.editor.setTheme(newTheme);
            }
        
        </script>
  </body>
</html>